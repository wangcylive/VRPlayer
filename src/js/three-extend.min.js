!function(e){"function"==typeof define&&define.amd?define("three-extend",["three"],e):"object"==typeof exports?module.exports=e:e()}(function(){THREE.StereoEffect=function(e){var t=new THREE.StereoCamera;t.aspect=.5,this.setSize=function(t,n){e.setSize(t,n)},this.render=function(n,i){n.updateMatrixWorld(),null===i.parent&&i.updateMatrixWorld(),t.update(i);var a=e.getSize();e.setScissorTest(!0),e.clear(),e.setScissor(0,0,a.width/2,a.height),e.setViewport(0,0,a.width/2,a.height),e.render(n,t.cameraL),e.setScissor(a.width/2,0,a.width/2,a.height),e.setViewport(a.width/2,0,a.width/2,a.height),e.render(n,t.cameraR),e.setScissorTest(!1)}},THREE.DeviceOrientationControls=function(e){var t=this;this.object=e,this.object.rotation.reorder("YXZ"),this.enabled=!0,this.deviceOrientation={},this.screenOrientation=0,this.alpha=0,this.alphaOffsetAngle=0;var n=function(e){t.deviceOrientation=e},i=function(){t.screenOrientation=window.orientation||0},a=function(){var e=new THREE.Vector3(0,0,1),t=new THREE.Euler,n=new THREE.Quaternion,i=new THREE.Quaternion((-Math.sqrt(.5)),0,0,Math.sqrt(.5));return function(a,o,r,l,d){t.set(r,o,-l,"YXZ"),a.setFromEuler(t),a.multiply(i),a.multiply(n.setFromAxisAngle(e,-d))}}();this.connect=function(){i(),window.addEventListener("orientationchange",i,!1),window.addEventListener("deviceorientation",n,!1),t.enabled=!0},this.disconnect=function(){window.removeEventListener("orientationchange",i,!1),window.removeEventListener("deviceorientation",n,!1),t.enabled=!1},this.update=function(){if(t.enabled!==!1){var e=t.deviceOrientation.alpha?THREE.Math.degToRad(t.deviceOrientation.alpha)+this.alphaOffsetAngle:0,n=t.deviceOrientation.beta?THREE.Math.degToRad(t.deviceOrientation.beta):0,i=t.deviceOrientation.gamma?THREE.Math.degToRad(t.deviceOrientation.gamma):0,o=t.screenOrientation?THREE.Math.degToRad(t.screenOrientation):0;a(t.object.quaternion,e,n,i,o),this.alpha=e}},this.updateAlphaOffsetAngle=function(e){this.alphaOffsetAngle=e,this.update()},this.dispose=function(){this.disconnect()}},window.Stats=function(){function e(e){return i.appendChild(e.dom),e}function t(e){for(var t=0;t<i.children.length;t++)i.children[t].style.display=t===e?"block":"none";n=e}var n=0,i=document.createElement("div");i.style.cssText="position:fixed;top:0;left:0;cursor:pointer;opacity:0.9;z-index:10000",i.addEventListener("click",function(e){e.preventDefault(),t(++n%i.children.length)},!1);var a=(performance||Date).now(),o=a,r=0,l=e(new Stats.Panel("FPS","#0ff","#002")),d=e(new Stats.Panel("MS","#0f0","#020"));if(self.performance&&self.performance.memory)var s=e(new Stats.Panel("MB","#f08","#201"));return t(0),{REVISION:16,dom:i,addPanel:e,showPanel:t,begin:function(){a=(performance||Date).now()},end:function(){r++;var e=(performance||Date).now();if(d.update(e-a,200),e>o+1e3&&(l.update(1e3*r/(e-o),100),o=e,r=0,s)){var t=performance.memory;s.update(t.usedJSHeapSize/1048576,t.jsHeapSizeLimit/1048576)}return e},update:function(){a=this.end()},domElement:i,setMode:t}},Stats.Panel=function(e,t,n){var i=1/0,a=0,o=Math.round,r=o(window.devicePixelRatio||1),l=80*r,d=48*r,s=3*r,c=2*r,f=3*r,h=15*r,u=74*r,p=30*r,m=document.createElement("canvas");m.width=l,m.height=d,m.style.cssText="width:80px;height:48px";var v=m.getContext("2d");return v.font="bold "+9*r+"px Helvetica,Arial,sans-serif",v.textBaseline="top",v.fillStyle=n,v.fillRect(0,0,l,d),v.fillStyle=t,v.fillText(e,s,c),v.fillRect(f,h,u,p),v.fillStyle=n,v.globalAlpha=.9,v.fillRect(f,h,u,p),{dom:m,update:function(d,w){i=Math.min(i,d),a=Math.max(a,d),v.fillStyle=n,v.globalAlpha=1,v.fillRect(0,0,l,h),v.fillStyle=t,v.fillText(o(d)+" "+e+" ("+o(i)+"-"+o(a)+")",s,c),v.drawImage(m,f+r,h,u-r,p,f,h,u-r,p),v.fillRect(f+u-r,h,r,p),v.fillStyle=n,v.globalAlpha=.9,v.fillRect(f+u-r,h,r,o((1-d/w)*p))}}}});